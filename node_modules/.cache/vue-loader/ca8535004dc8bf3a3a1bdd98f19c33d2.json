{"remainingRequest":"D:\\all_project\\WarmSearch-PC\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\all_project\\WarmSearch-PC\\src\\views\\Login\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\all_project\\WarmSearch-PC\\src\\views\\Login\\index.vue","mtime":1646550207549},{"path":"D:\\all_project\\WarmSearch-PC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\all_project\\WarmSearch-PC\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\all_project\\WarmSearch-PC\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\all_project\\WarmSearch-PC\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHNldFN0b3JlIH0gZnJvbSAnQC91dGlscy9zdG9yYWdlJwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIGxldCB2YWxpZGF0ZVVzZXIgPSAocnVsZSx2YWx1ZSxjYWxsYmFjaykgPT4gewogICAgICBpZih2YWx1ZT09PScnKXsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+i+k+WFpei0puWPtycpKQogICAgICB9ZWxzZSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfQogICAgfTsKICAgIGxldCB2YWxpZGF0ZVBhc3MgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIGlmICh2YWx1ZSA9PT0gIiIpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuivt+i+k+WFpeWvhueggSIpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgcnVsZUZvcm06IHsKICAgICAgICB1c2VybmFtZTonJywKICAgICAgICBwYXNzd29yZDonJwogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIHVzZXJuYW1lOiBbeyB2YWxpZGF0b3I6IHZhbGlkYXRlVXNlciwgdHJpZ2dlcjogImJsdXIiIH1dLAogICAgICAgIHBhc3N3b3JkOiBbeyB2YWxpZGF0b3I6IHZhbGlkYXRlUGFzcywgdHJpZ2dlcjogImJsdXIiIH1dCiAgICAgIH0sCiAgICB9CiAgfSwKICBtZXRob2RzOnsKICAgIHJldHVybmhvbWUoKXsKICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICfpo47ph4zpm6jph4zvvIzmiJHku6zpg73lnKjov5nnrYnmgqjlm57mnaXvvIzmrKLov47mgqjnmoTkuIvmrKHkvb/nlKgnLAogICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICB9KTsKICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoJy8nKTsKICAgIH0sCiAgICBzdWJtaXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiAn55yf6K+a55qE5biM5pyb5oiR5Lus55qE5bmz5Y+w5Y+v5Lul5biu5Yqp5Yiw5oKoJywKICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgfSk7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKGFzeW5jIHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIC8vICAg6I635Y+W55So5oi35ZCN5ZKM5a+G56CBCiAgICAgICAgICAvLyBsZXQge3VzZXIscGFzc30gPSB0aGlzLnJ1bGVGb3JtOwogICAgICAgICAgbGV0IHJlcyA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgnL3BjdXNlci9sb2dpbicsdGhpcy5ydWxlRm9ybSk7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMDAwKSB7CiAgICAgICAgICAgIGxldCB7IHVzZXJuYW1lLCB0b2tlbiB9ID0gcmVzLmRhdGEuZGF0YTsKCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICBuYW1lOiAiaG9tZSIKICAgICAgICAgICAgfSkKCgogICAgICAgICAgICAvLyAg5oyB5LmF5YyWIOWtmOWCqAogICAgICAgICAgICBzZXRTdG9yZSgidG9rZW4iLCB0b2tlbik7CiAgICAgICAgICAgIHNldFN0b3JlKCJ1c2VybmFtZSIsIHVzZXJuYW1lKTsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jYXJ0KTsKCiAgICAgICAgICAgIC8vIGlmICh0aGlzLmNhcnQgJiYgdGhpcy5jYXJ0Lmxlbmd0aCkgewogICAgICAgICAgICAvLyAgIHRoaXMuY2FydC5mb3JFYWNoKGFzeW5jIGl0ZW0gPT4gewogICAgICAgICAgICAvLyAgICAgbGV0IHJlcyA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgiL2FwaS9hZGRDYXJ0IiwgaXRlbSk7CiAgICAgICAgICAgIC8vICAgICBpZiAocmVzLmRhdGEuc3VjY2VzcyA9PT0gdHJ1ZSkgewogICAgICAgICAgICAvLyAgICAgICAvLy4uLi4uLi4KICAgICAgICAgICAgLy8gICAgIH0KICAgICAgICAgICAgLy8gICAgIHJlbW92ZVN0b3JlKCJidXlDYXJ0Iik7CiAgICAgICAgICAgIC8vICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICIvIiB9KTsKICAgICAgICAgICAgLy8gICB9KTsKICAgICAgICAgICAgLy8gfSBlbHNlIHsKICAgICAgICAgICAgLy8gICB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDogIi8ifSk7CiAgICAgICAgICAgIC8vIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coImVycm9yIHN1Ym1pdCEhIik7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKCiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Login","sourcesContent":["<!--\n * @Description: 登录页面\n * @Author: lijinghailjh@163.com\n * @Date: 2021/3/7\n -->\n<template>\n  <div class=\"login\">\n    <div class=\"box\">\n      <span>使用账号 登录官网</span>\n      <el-form\n          :model=\"ruleForm\"\n          status-icon\n          :rules=\"rules\"\n          ref=\"ruleForm\"\n          label-width=\"100px\"\n          class=\"demo-ruleForm\"\n      >\n        <el-form-item label=\"账号\" prop=\"username\">\n          <el-input type=\"text\" v-model=\"ruleForm.username\" autocomplete=\"off\" placeholder=\"请输入账号\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"密码\" prop=\"password\">\n          <el-input type=\"password\" v-model=\"ruleForm.password\" autocomplete=\"off\" placeholder=\"请输入密码\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button  type=\"primary\" @click=\"submitForm('ruleForm')\" :plain=\"true\" >登录</el-button>\n            <el-button @click=\"returnhome\">返回</el-button>\n        </el-form-item>\n      </el-form>\n      <a href=\"/registere\" style=\"padding-left:312px\">新用户注册</a>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport { setStore } from '@/utils/storage'\nexport default {\n  data() {\n    let validateUser = (rule,value,callback) => {\n      if(value===''){\n        callback(new Error('请输入账号'))\n      }else {\n        callback();\n      }\n    };\n    let validatePass = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入密码\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      ruleForm: {\n        username:'',\n        password:''\n      },\n      rules: {\n        username: [{ validator: validateUser, trigger: \"blur\" }],\n        password: [{ validator: validatePass, trigger: \"blur\" }]\n      },\n    }\n  },\n  methods:{\n    returnhome(){\n      this.$message({\n        showClose: true,\n        message: '风里雨里，我们都在这等您回来，欢迎您的下次使用',\n        type: 'success'\n      });\n      this.$router.replace('/');\n    },\n    submitForm(formName) {\n      this.$message({\n        showClose: true,\n        message: '真诚的希望我们的平台可以帮助到您',\n        type: 'success'\n      });\n      this.$refs[formName].validate(async valid => {\n        if (valid) {\n          //   获取用户名和密码\n          // let {user,pass} = this.ruleForm;\n          let res = await this.$http.post('/pcuser/login',this.ruleForm);\n          console.log(res);\n          if (res.data.code === 20000) {\n            let { username, token } = res.data.data;\n\n            this.$router.push({\n              name: \"home\"\n            })\n\n\n            //  持久化 存储\n            setStore(\"token\", token);\n            setStore(\"username\", username);\n            // console.log(this.cart);\n\n            // if (this.cart && this.cart.length) {\n            //   this.cart.forEach(async item => {\n            //     let res = await this.$http.post(\"/api/addCart\", item);\n            //     if (res.data.success === true) {\n            //       //.......\n            //     }\n            //     removeStore(\"buyCart\");\n            //     this.$router.push({ path: \"/\" });\n            //   });\n            // } else {\n            //   this.$router.push({path: \"/\"});\n            // }\n          }\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.login {\n  position: relative;\n  overflow: visible;\n  background: #ededed;\n  .box {\n    width: 450px;\n    border: 1px solid #dadada;\n    border-radius: 10px;\n    position: absolute;\n    top: 200px;\n    left: 50%;\n    padding: 50px 50px 50px 10px;\n    margin-left: -225px;\n    box-shadow: 0 9px 30px -6px rgba(0, 0, 0, 0.2),\n    0 18px 20px -10px rgba(0, 0, 0, 0.04),\n    0 18px 20px -10px rgba(0, 0, 0, 0.04),\n    0 10px 20px -10px rgba(0, 0, 0, 0.04);\n    text-align: center;\n    form {\n      margin-top: 30px;\n    }\n    span {\n      color: #333;\n      font-weight: 400;\n    }\n  }\n}\n</style>\n"]}]}